auth_enabled: false

server:
  http_listen_port: 3100

common:
  instance_addr: 127.0.0.1
  path_prefix: /loki
  storage:
    filesystem:
      chunks_directory: /loki/chunks
      rules_directory: /loki/rules
  replication_factor: 1
  ring:
    kvstore:
      store: inmemory

schema_config:
  configs:
    - from: 2020-10-24
      store: tsdb
      object_store: filesystem
      schema: v13
      index:
        prefix: index_
        period: 24h

ruler:
  alertmanager_url: http://localhost:9093

# for test
# By default, Loki will send anonymous, but uniquely-identifiable usage and configuration
# analytics to Grafana Labs. These statistics are sent to https://stats.grafana.org/
#
# Statistics help us better understand how Loki is used, and they show us performance
# levels for most users. This helps us prioritize features and documentation.
# For more information on what's sent, look at
# https://github.com/grafana/loki/blob/main/pkg/usagestats/stats.go
# Refer to the buildReport method to see what goes into a report.
#
# If you would like to disable reporting, uncomment the following lines:
#analytics:
#  reporting_enabled: false

compactor:
  retention_enabled: true # 보존기간 활성화, default false 무한 저장
  retention_delete_delay: 2h # 청크를 삭제하기까지의 지연 시간, default 2h
  retention_delete_worker_count: 150 # 삭제 고루틴 개수, default 150
  working_directory: /loki/retention # 임시 테이블 저장되는 디렉토리
  compaction_interval: 10m # 압축 또는 보존 적용되는 빈도, default 10m
  delete_request_store: filesystem # https://github.com/grafana/loki/issues/12588

# table_manager 는 더이상 사용되지 않고 limits_config 가 사용됨
limits_config:
  retention_period: 744h   # 모든 로그스트림에 적용, 
  max_query_lookback: 744h # 30 days
